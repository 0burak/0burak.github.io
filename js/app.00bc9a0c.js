(function(){"use strict";var e={7106:function(e,n,t){var s=t(9963),o=t(6252);const i={class:"section"},a={class:"container"};function r(e,n,t,s,r,l){const c=(0,o.up)("mainComp"),d=(0,o.up)("simple-upload");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",a,[(0,o.Wm)(c),(0,o.Wm)(d)])])}const l=e=>((0,o.dD)("data-v-715dd1ce"),e=e(),(0,o.Cn)(),e),c=l((()=>(0,o._)("h3",null,"Software Engineering Group Project",-1))),d=l((()=>(0,o._)("canvas",null,null,-1))),u=[c,d];function h(e,n,t,s,i,a){return(0,o.wg)(),(0,o.iD)("div",null,u)}var p=t(7327),m=(t(7658),t(8684)),f=t(9701),g=(t(8762),t(9626),t(6941),document.getElementById("loadFile"));g||(g=document.createElement("INPUT"),g.setAttribute("id","loadFile"),g.setAttribute("type","file"),g.style.position="absolute",g.style.top="80px",g.style.width="200px",g.style.height="100px",g.style.right="40px",document.body.children[0].appendChild(g));class w{constructor(e){(0,p.Z)(this,"scene",void 0),(0,p.Z)(this,"engine",void 0),this.canvas=e,this.engine=new m.D4V(this.canvas,!0),this.scene=this.CreateScene();const n=new m.YfP("Camera",-Math.PI/4*3,Math.PI/4,10,new m.Pa4(0,0,0),this.scene);n.attachControl(!0),this.initXR(),this.engine.runRenderLoop((()=>{this.scene.render()}))}CreateScene(){const e=new m.xsS(this.engine);return e}async initXR(){const e=new m.gZI({groundOpacity:3},this.scene),n=new m.ezm("hemiLight",new m.Pa4(0,1,0),this.scene);n.intensity=0;const t=m.BtG.CreateFromPrefilteredData("./environment/sky.env",this.scene);this.scene.environmentTexture=t,this.scene.createDefaultSkybox(t,!0),m.n0n.ImportMeshAsync("","./models/","white-room1.glb").then((e=>{e.meshes.forEach((e=>{e.scaling=new m.Pa4(2,2,2),e.position.y=-.7,e.isPickable=!1}))}));var s=new f.iU(this.scene);const o=new f.LL("near");s.addControl(o);const i=new f.qI("button0");i.imageUrl="./textures/IconFollowMe.png",i.text="Button 0",o.addButton(i);const a=new f.qI("button1");a.imageUrl="./textures/IconClose.png",a.text="Button 1",o.addButton(a);const r=new f.qI("button2");r.imageUrl="./textures/IconFollowMe.png",r.text="Button 2",o.addButton(r),o.isPinned=!0;var l=new m.YOI(""),c=new f.VJ;c.margin=.2,s.addControl(c),c.linkToTransformNode(l),c.position.z=-.5,c.position.y=1.75;var d=function(){var e=new f.Qj("orientation");c.addControl(e),e.text="Button #"+c.children.length};c.blockLayout=!0;for(var u=0;u<30;u++)d();c.blockLayout=!1;const h=new m.PMe("spotLight",new m.Pa4(0,.5,-3),new m.Pa4(0,1,3),Math.PI/2,10,this.scene);h.intensity=100,h.shadowEnabled=!0;const p=new m.uXA(2048,h),g=new m.SUW;g.scaleRatio=4,g.light=h;const w=new m.q1Z(this.scene);w.positionGizmoEnabled=!0,w.rotationGizmoEnabled=!0,w.usePointerToAttachGizmos=!1,w.attachToMesh(g.attachedMesh);const v=new m.Ox3("directionalLight",new m.Pa4(-10,-5,-8.5),this.scene);v.shadowEnabled=!0,v.position=new m.Pa4(100,50,85);const b=new m.uXA(2048,v);e.skybox?.dispose(),e.ground.position.y=-.2,e.ground.isPickable=!1,e.ground.visibility=!0;const y=new m.YVB("pbr",this.scene);y.albedoTexture=new m.xEZ("./textures/mud/brown_mud_diffuse.jpeg",this.scene),y.bumpTexture=new m.xEZ("./textures/mud/brown_mud_normal.jpeg",this.scene),y.invertNormalMapX=!0,y.invertNormalMapY=!0,y.useAmbientOcclusionFromMetallicTextureRed=!0,y.useRoughnessFromMetallicTextureGreen=!0,y.useMetallnessFromMetallicTextureBlue=!0,y.roughness=.9,e.ground.material=y,this.scene.environmentIntensity=.1;const P=await m.BBM.CreateAsync(this.scene,{floorMeshes:[e.ground],optionalFeatures:!0});m.n0n.ImportMeshAsync("","./models/","Barrel_01.glb").then((n=>{console.log("result.meshes",n.meshes);for(var t=!1,s=0;s<n.meshes.length;s++)n.meshes[s].overrideMaterialSideOrientation=t;for(s=1;s<n.meshes.length;s++){n.meshes[s].overrideMaterialSideOrientation=t;var o=m.xx8.ExtractFromMesh(n.meshes[s]),i=o.positions;i||console.log("Mesh ",s," is missing position data"),console.log("Positions for ",s,"which is ",n.meshes[s].name,"are: ",i)}const a=m.Kj0.MergeMeshes(n.meshes.slice(1),!0,!0,null,!1,!0);a.isPickable=!0,a.position=new m.Pa4(0,.3,0),a.receiveShadows=!0,p.getShadowMap().renderList.push(a),p.addShadowCaster(a),b.getShadowMap().renderList.push(a),b.addShadowCaster(a),e.ground.receiveShadows=!0}));const M=new m.zHn(new m.Pa4,new m.Pa4,3),x=new m.zHn(new m.Pa4,new m.Pa4,3),C=new m.zHn(new m.Pa4,new m.Pa4,3),k=new m.lSG(M);k.show(this.scene);const S=new m.lSG(x);S.show(this.scene);const F=new m.lSG(C);let _;F.show(this.scene),P.input.onControllerAddedObservable.add((e=>{e.onMotionControllerInitObservable.add((n=>{if("right"===n.handness){const t=n.getComponentIds(),s=n.getComponent(t[0]);s.onButtonStateChangedObservable.add((()=>{if(s.value>.5){e.getWorldPointerRayToRef(M,!1);const t=this.scene.pickWithRay(M);t&&void 0!==t.pickedMesh&&t.pickedMesh&&(_=t.pickedMesh,console.log("name:"+t.pickedMesh.name),_.setParent(n.rootMesh))}else s.value<.5&&void 0!=_&&_.setParent(null)}));const o=n.getComponent(t[3]);o.onButtonStateChangedObservable.add((()=>{if(o.pressed){e.getWorldPointerRayToRef(x,!1);const n=this.scene.pickWithRay(x);n&&n.pickedMesh&&n.pickedMesh.scaling.multiplyInPlace(new m.Pa4(.9,.9,.9))}}));const i=n.getComponent(t[4]);i.onButtonStateChangedObservable.add((()=>{if(i.pressed){e.getWorldPointerRayToRef(C,!1);const n=this.scene.pickWithRay(C);n&&n.pickedMesh&&n.pickedMesh.scaling.multiplyInPlace(new m.Pa4(1.1,1.1,1.1))}}))}}))}))}}var v={name:"mainComp",mounted(){const e=document.querySelector("canvas");new w(e)}},b=t(3744);const y=(0,b.Z)(v,[["render",h],["__scopeId","data-v-715dd1ce"]]);var P=y,M=t(3577);const x={class:"message-body"},C={class:"field"},k={class:"file is-boxed is-primary"},S={class:"file-label"},F=(0,o._)("span",{class:"file-cta"},[(0,o._)("span",{class:"file-icon"},[(0,o._)("i",{class:"fas fa-upload"})])],-1),_=(0,o._)("div",null,"Enter object name: ",-1),O={class:"field"},I=(0,o._)("button",null,"Add To Scene",-1);function T(e,n,t,i,a,r){return(0,o.wg)(),(0,o.iD)("form",{onSubmit:n[3]||(n[3]=(0,s.iM)(((...e)=>r.sendFile&&r.sendFile(...e)),["prevent"])),enctype:"multipart/form-data"},[a.message?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,M.C_)("message "+(a.error?"is-danger":"is-success"))},[(0,o._)("div",x,(0,M.zw)(a.message),1)],2)):(0,o.kq)("",!0),(0,o._)("div",C,[(0,o._)("div",k,[(0,o._)("label",S,[(0,o._)("input",{type:"file",ref:"file",onChange:n[0]||(n[0]=(...e)=>r.selectFile&&r.selectFile(...e)),class:"file-input"},null,544),F])])]),_,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>a.fileName=e)},null,512),[[s.nr,a.fileName]]),(0,o._)("div",O,[(0,o._)("button",{class:"button is-info",onClick:n[2]||(n[2]=(...e)=>r.addFileToList&&r.addFileToList(...e))}," Send ")]),(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.uploadedFiles,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Uk)((0,M.zw)(e)+" ",1),I])))),128))])],32)}var B=t(8945),R={name:"SimpleUpload",data(){return{file:"",message:"",error:!1,fileName:"",uploadedFiles:[]}},methods:{selectFile(){this.file=this.$refs.file.files[0],this.error=!1,this.message=""},addFileToList(){this.uploadedFiles.push(this.fileName),this.fileName=""},async sendFile(){const e=new FormData;e.append("file",this.file);try{await B.Z.post("/api/upload",e),this.message="File has been uploaded",this.file="",this.error=!1}catch(n){console.log(n),this.message=n.response.data.error,this.error=!0}}}};const E=(0,b.Z)(R,[["render",T]]);var L=E,j={name:"App",components:{mainComp:P,SimpleUpload:L}};const A=(0,b.Z)(j,[["render",r]]);var D=A;(0,s.ri)(D).mount("#app")}},n={};function t(s){var o=n[s];if(void 0!==o)return o.exports;var i=n[s]={exports:{}};return e[s](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,s,o,i){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<a&&(a=i));if(r){e.splice(d--,1);var c=o();void 0!==c&&(n=c)}}return n}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){t.d=function(e,n){for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,s){var o,i,a=s[0],r=s[1],l=s[2],c=0;if(a.some((function(n){return 0!==e[n]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(l)var d=l(t)}for(n&&n(s);c<a.length;c++)i=a[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))}();var s=t.O(void 0,[998],(function(){return t(7106)}));s=t.O(s)})();
//# sourceMappingURL=app.00bc9a0c.js.map